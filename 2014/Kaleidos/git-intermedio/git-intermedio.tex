\documentclass[10pt]{beamer}

\usepackage[latin1]{inputenc}
\usepackage[spanish]{babel}

\mode<presentation>
\usetheme{Madrid}
\usecolortheme[RGB={128,0,0}]{structure}
\usefonttheme{serif}
\useinnertheme{rectangles}
\useoutertheme{split}
\setbeamercovered{transparent}

\title{Git intermedio: Más allá del commit}
\author{Jesús Espino García}
\date{4 de Abril de 2014}
\subject{Git intermedio}

\institute[Kaleidos]{\includegraphics[height=1.5cm]{kaleidos}}

\begin{document}

  \frame{\maketitle}

  \begin{frame}{¿Por qué?}
    \begin{itemize}
      \item Es una herramienta importante.
      \item La usamos a diario.
      \item Es tambien una base de conocimiento.
    \end{itemize}
  \end{frame}

  \begin{frame}{¿Qué supongo que ya sabeis?}
    \begin{itemize}
      \item Add/Commit
      \item Merge
      \item Fetch/Pull/Push
      \item Ramas
      \item Logs
    \end{itemize}
  \end{frame}

  \begin{frame}{¿Qué vamos a ver?}
    \begin{itemize}
      \item Index
      \item Reflog
      \item Commit/Add patch
      \item Commit/Range selectors
      \item Checkout
      \item Reset
      \item Bisect
      \item Revert
      \item Cherry-picking
      \item Rebases
    \end{itemize}
  \end{frame}

  \begin{frame}{Index}
    \begin{itemize}
      \item El lugar para poner lo que vas a comitear
      \item Al añadir un cambio o fichero al index se genera un blob nuevo.
      \item Puede haber cambios diferentes en la copia de trabajo y el index.
    \end{itemize}
  \end{frame}

  \begin{frame}[containsverbatim]{Index}
    \begin{verbatim}
      git status
      git add file-with-changes.txt
      git status
      echo "example" >> file-with-changes.txt
      git status
    \end{verbatim}
  \end{frame}

  \begin{frame}{Reflog}
    \begin{itemize}
      \item Log de referencias.
      \item Se añade una entrada cada vez que cambia HEAD.
      \item Es util para acceder a commits desreferenciados.
      \item Suele ser util para ver en que ramas has hecho ciertas cosas.
    \end{itemize}
  \end{frame}

  \begin{frame}[containsverbatim]{Reflog}
    \begin{verbatim}
      git reflog
      git checkout -b new-branch
      git checkout master
      git commit --allow-empty -m "example"
      git checkout new-branch
      git checkout master
      git reflog
    \end{verbatim}
  \end{frame}

  \begin{frame}{Commit/Add patch}
    \begin{itemize}
      \item Es importante la atomicidad de los commits.
      \item Se puede hacer añadido o commits de partes de un fichero.
    \end{itemize}
  \end{frame}

  \begin{frame}[containsverbatim]{Commit/Add patch}
    \begin{verbatim}
      git add -p
      git commit -p
    \end{verbatim}
  \end{frame}

  \begin{frame}{Commit/Range selectors}
    \begin{itemize}
      \item Hay que ser capaz de referenciar commits o rangos.
      \item Acceder a commits por diferentes caminos.
    \end{itemize}
  \end{frame}

  \begin{frame}{Commit/Range selectors}
    \begin{itemize}
      \item Acceder a un commit concreto
      \begin{itemize}
        \item HEAD
        \item ramas (ejemplo: master)
        \item tags (ejemplo: v1.0.0)
        \item commit id (ejemplo: f7234b124a)
      \end{itemize}
    \end{itemize}
  \end{frame}

  \begin{frame}{Commit/Range selectors}
    \begin{itemize}
      \item Acceder a commit de manera relativa
      \begin{itemize}
        \item <commit>@{<date>}, <commit>@{yesterday}, <commit>@{5 minutes ago} (ejemplo: master@{1979-02-26})
        \item <commit>@{<n>} (ejemplo: master@{2})
        \item @{<n>} (ejemplo: @{2})
        \item @{<-n>} (ejemplo: @{-2})
        \item @{upstream} (ejemplo: master@{upstream})
        \item <commit>\^, <commit>\^<n> (ejemplo: HEAD\^2)
        \item <commit>~<n> (ejemplo: master~3)
        \item <commit>\^{<type>
        \item 
      \end{itemize}
    \end{itemize}
  \end{frame}

  \begin{frame}{Checkout}
    \begin{itemize}
      \item ####TODO####
    \end{itemize}
  \end{frame}

  \begin{frame}{Reset}
    \begin{itemize}
      \item Permite restablecer a un commit la rama, el index y la copia de trabajo.
      \item Existen 5 modos de reset:
      \begin{itemize}
        \item soft: Establece solo el puntero de la rama
        \item mixed: Establece el puntero y reinicia el index (Por defecto).
        \item hard: Establece el puntero y reinicia el index y la copia de trabajo.
        \item merge: Como un hard pero conserva los cambios que no estén en el index.
        \item keep: Como hard pero mateniendo los ficheros cambiados.
      \end{itemize}
      \item Los modos habituales son soft, mixed y hard.
    \end{itemize}
  \end{frame}

  \begin{frame}{Bisect}
    \begin{itemize}
      \item Busqueda dicotomica de errores.
      \item Permite detectar exactamente en que commit empezo a ocurrir algo.
      \item Se puede hacer manualmente o de manera automatica.
    \end{itemize}
  \end{frame}

  \begin{frame}{Revert}
    \begin{itemize}
      \item Es interesante poder deshacer un commit.
      \item Es la mejor opción cuando tus cambios ya subidos.
    \end{itemize}
  \end{frame}

  \begin{frame}{Cherry-picking}
    \begin{itemize}
      \item Es interesante poder reaplicar un commit en otra rama.
      \item No siempre quieres hacer un merge.
    \end{itemize}
  \end{frame}

  \begin{frame}{Rebases}
    \begin{itemize}
      \item Permiten cambiar mis commits.
      \item Reorganizarlos.
      \item Actualizar mi rama de una manera mas limpia.
      \item Mover un cojunto de commits a otro punto.
    \end{itemize}
  \end{frame}

  \begin{frame}{Rebases de ramas}
    \begin{itemize}
      \item Se utiliza para actualizar la rama actual.
      \item Funciona en tres pasos:
      \begin{itemize}
        \item Elimina los commits aplicados en la rama.
        \item Coloca el puntero de la rama sobre el ultimo commit de la otra rama.
        \item Añade los commits eliminados previamente.
      \end{itemize}
    \end{itemize}
  \end{frame}

  \begin{frame}{Rebases sobre la misma rama}
    \begin{itemize}
      \item Es interesante poder reestructurar mis commits.
      \item Reordenarlos.
      \item Juntarlos.
      \item Renomrar el mensaje de commit.
    \end{itemize}
  \end{frame}

  \begin{frame}{Aliases}
    \begin{itemize}
      \item Pueden crearse alias de comandos.
      \item Nos ahorra algo de tiempo.
      \item Nos facilita no tener que recordar ciertas cosas.
      \item 
    \end{itemize}
  \end{frame}

  \begin{frame}{Stash}
    \begin{itemize}
      \item Almacena cambios no comiteados en una pila.
      \item Muy util para dejar trabajo a medias y retomarlo luego.
      \item 
      \item 
    \end{itemize}
  \end{frame}

  \begin{frame}{Archive}
    \begin{itemize}
      \item Permite crear un tar/zip del repo.
      \item Util para generar versiones.
      \item 
      \item 
    \end{itemize}
  \end{frame}

  \begin{frame}{Bundle}
    \begin{itemize}
      \item Permite crear un archivo que actua como repo.
      \item Util para compartir un repo.
      \item 
      \item 
    \end{itemize}
  \end{frame}

  \begin{frame}{Gitignore}
    \begin{itemize}
      \item Puedes ignorar ficheros.
      \item por ejemplo los .pyc o .class.
      \item Patrones en .gitignore o en .git/info/exclude
    \end{itemize}
  \end{frame}

  \begin{frame}{Hooks}
    \begin{itemize}
      \item Acciones ante ciertos eventos
      \item Normalmente Pre/Post Commit/Push
      \item Ejemplos habituales
      \begin{itemize}
          \item Analisis de covertura/estilos (cliente o servidor).
          \item Despliegue.
          \item Integración continua.
      \end{itemize}
    \end{itemize}
  \end{frame}

  \begin{frame}{Dudas}
    \dots
  \end{frame}

  \begin{frame}
    \frametitle{\begin{center}Fin\end{center}}
    \begin{center}
      \includegraphics[height=3cm]{kaleidos}
    \end{center}
  \end{frame}

\end{document}
